<div [formGroup]="form" class="form-group mb-3">

  <div [ngSwitch]="formField.fieldType">

    <div *ngSwitchCase="'type-text'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <input class="form-control" [formControlName]="formField.name" [id]="formField.name" [type]="formField.type"
             [placeholder]="formField.placeholder"
             [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.minlength">{{formField.validatorMinLengthMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-tel'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <input class="form-control" [formControlName]="formField.name" [id]="formField.name" [type]="formField.type"
             [placeholder]="formField.placeholder" (keypress)="onlyNumbers($event)"
             [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.minlength && !nameFieldControl.errors?.pattern">{{formField.validatorMinLengthMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.maxlength && !nameFieldControl.errors?.pattern">{{formField.validatorMaxLengthMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.pattern">{{formField.validatorPatternMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-email'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <input class="form-control" [formControlName]="formField.name" [id]="formField.name" [type]="formField.type"
             [placeholder]="formField.placeholder"
             [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.email">{{formField.validatorEmailMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-date'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <input class="form-control" [formControlName]="formField.name" [id]="formField.name" [type]="formField.type"
             [placeholder]="formField.placeholder"
             [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.pattern">{{formField.validatorPatternMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-datalist'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <input class="form-control" list="datalistOptions" [formControlName]="formField.name" [type]="formField.type"
             [placeholder]="formField.placeholder"
             [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
      <datalist id="datalistOptions">
        <option *ngFor="let datalist of formField.datalists" [value]="datalist.value">
      </datalist>
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.pattern">{{formField.validatorPatternMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-select'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <select class="form-select" [id]="formField.name" [formControlName]="formField.name"
              [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
        <option selected disabled value="">Alege...</option>
        <option *ngFor="let opt of formField.options" [value]="opt.key">{{opt.value}}</option>
      </select>
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-textarea'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <textarea class="form-control" [formControlName]="formField.name" [id]="formField.name" [placeholder]="formField.placeholder" rows="2"
                [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }"></textarea>
      <div class="invalid-feedback">
        <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        <div *ngIf="nameFieldControl.errors?.minlength">{{formField.validatorMinLengthMessage}}</div>
      </div>
    </div>

    <div *ngSwitchCase="'type-radio'">
      <label class="form-label pt-0" [attr.for]="formField.name">{{formField.label}}</label>
      <div class="form-check" *ngFor="let opt of formField.options">
        <input class="form-check-input" type="radio" [formControlName]="formField.name" [id]="formField.name" [value]="opt.key"
               [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
        <label class="form-check-label" [attr.for]="opt.key"> {{ opt.value }} </label>
        <div class="invalid-feedback">
          <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        </div>
      </div>
    </div>

    <div *ngSwitchCase="'type-checkbox'">
      <label class="form-label" [attr.for]="formField.name">{{formField.label}}</label>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" [formControlName]="formField.name" [id]="formField.name"
               [ngClass]="{ 'is-invalid': nameFieldControl.errors && (nameFieldControl.touched || nameFieldControl.dirty || isSubmitted), 'is-valid': nameFieldControl.valid }">
        <label class="form-check-label" [attr.for]="formField.name">{{ formField.checkLabel }}</label>
        <div class="invalid-feedback">
          <div *ngIf="nameFieldControl.errors?.required">{{formField.validatorRequiredMessage}}</div>
        </div>
      </div>
    </div>

  </div>

</div>
